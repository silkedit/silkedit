language: cpp
compiler: clang
os:
- osx
osx_image: xcode7.3
node_js: '6.4'
env:
  global:
  - QTDIR=/usr/local/opt/qt5
  - PATH=$QTDIR/bin:$PATH
  - secure: jeteZSPQmKTFHYcALI1BlPfJbsx7eWecDQ46Kut2eaCD44qMaX1Oe6KMtgxMRiSG8g/qmFsxskoBGdBUIbt8K6mbtsrgB+422g9xCgAmJj7S4Ls0wDIcbWXlpkyfnnY2elwd1kH8m0tTwPr7e4Pp/2vNctbEv0HWrmiIlA2vhiQx3KJ+BphGJZWzm/iyNQyJN2stHXPSZ4bUXUHyZMC6CHgpLlKEDwpjOQQf/a+C+eghyGB2qUvyUBtV86z8BN4MLEkyKtB1iO/zWyJ4no50dL5tEv5Uwm7hR9j441UGxuW/hmH2kfPWujANexgk64SUV3hnRGKbIxBrNEbTvNGia5uRgZlZ3vcvWIKO6egwKaI5mnyqany5EaiefP2/Jgs/qdga9gMVekSdJCpHNmA5rAvQaMLWxJx7kEWN5v8zq0rPpFI+NmPgx6MikKZrIEAc3fKVB7tylzFYQyhvWCLP2zhPPsfWSL444OKDbb7NGAloRQE4ier7i3uDKcjBfFOMnOdFM51qRs6JrdQT4QJbfiziiQ9JRxQ2zYe0at36j8Cz9Yhh2/pZQNgK1D9yEqEhqE6Hd4Rj+x1KXo9D9YS3C6vxcdSZrEL7YzkyiwS9Bowl4osprFqCz0tFfBYzouCz9bfUeWnybdqScdiQkwvMEQmJ3oL6/SK0aVhxcKkN1mw=
  - secure: AOUMEZRGLx4n89O5kr+v9Bi/T3uuKYJ9bvH5WPMfNBKSt2h8BAcV9msco39rezuQhjAtcyKYDI9ecbsM4q0x3ill/sHjtbNufnEN+WmG4Jk3y5AjnToL67azRAgxpbvOphNUDKfuSm4bJJT2n2n8+nzORbr3Eyi3jiQCzF+Ew8/a3sJdFFf1aFb3t72RVTL1sW8ufzWnWrdo3ljh61N+ouPArucYeia7ih4PE2yj3zk4jzDRkuyKeZtgXLqZ8aeSpyKdSRKb8/B+aX/293VBuRJAx2nrB8RPW18b+yRtRaw1biYhUBJ1AIiEsBqO0FEU/Ddip2ZhODf6RWL1FpVGqlhLg9bX17lgNoBrpu9f6p2CGYu/Addw2JmJms9VteK7mG3Aavj8CXnELGBK08PTzQNnjpCavppVhjFxouNXa2kXZnBM7hXHyDDi9zuJclp80beGm/FLQtBJGX7ODpOUxvzSrgvXSy5d6G+O3DhjZnuemWZO5m+Iu5FbUFcN7uGJSfirbBO8Re34i+URPUhpU2rkDOejAc2izgxLg//WbyTAbIKiwlkmP2ZJL13QFcEYciVsQA7Vtme8XG0/ucxQ49kYJsqnOegQBgm+3yM4ZRl4r0Wzfpdc8bqsvYGcJNY/yN/SWN3eK3sb9dOsLHOO9PPMwgsESM8SpJtUNlZ+n4E=
before_install:
- openssl aes-256-cbc -K $encrypted_ea3534b93422_key -iv $encrypted_ea3534b93422_iv
  -in .travis/secrets.tar.enc -out .travis/secrets.tar -d
- tar xvf .travis/secrets.tar -C ./.travis
- if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then sudo security import ./.travis/travis.p12
  -k /Library/Keychains/System.keychain -P ${KEY_PASSWORD} -T /usr/bin/codesign; fi
install:
- pip install conan
- brew install ninja qt5
script:
- "./run resolve"
- npm run minify
- "./run build"
- if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then ./run make_installer --sign ${CODE_SIGN_IDENTITY};
  else ./run make_installer; fi
- "./run test"
